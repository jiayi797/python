python作业
贾已 2012210031
教务系统的爬虫 学习感悟
=====================================================================================================================

  听说，Python是黑客必须掌握的四种语言之一。作为北邮的一名学生，Python似乎是必须掌握的技能。也就是从这学期开始学Python的，到现在不过也就不到半年的时间，所以这初学感悟就比较肤浅了。

我对Python的认识首先从百度百科上开始的，同时接触的还有Perl，不过从没有进一步去了解Perl。记得当时看过百度百科之后的几点印象，第一这门语言很有用，比如Python被誉为胶水语言，比如大名鼎鼎的Google就在用它，不过我现在还没有接触到Python的实际应用。

第二这是门脚本语言，说实话，我对脚本语言的了解不多，原先看过Macromedia（现在被Adobe收了）的Actionscript，不久以前看多点JavaScript；其中JavaScript给我的感觉就是和C++或者说C#、Java很像，当然指的是语法上的。而现在看Python在语法上和上面这几种有很大的不同了。Python语法给人的感觉首先是严格的缩进，其次就是简洁优雅，没有了大括号，没有了分号，这个代码文件忽然变得非常的整洁。

第三，这是门动态语言。在命令行下面就算是输入一个1+1，回车之后就能给个2的结果。不要编译连接等步骤，一边写代码一边就有结果了。当然，这也只是初学阶段的事，到后面就要用模块这类东西了。

不过这给我一个很强烈的感受就是，Python语言或许更适合作为一门入门语言。首先从从语法上讲，Python语言比现在很多作为第一编程语言（C/C++、Visual Basic等）要简单很多。其次，这种解释语言的机制，更能让初学者体验到学习成果，不需要了解很多东西，也能编出个小程序来，这个过程比其他语言要快和简单很多。再次，从自学或者教学的角度来讲，搭建Python的基础开发环境再简单不过了，只要安装一个十几兆的程序，就得到了一个命令行工具，一个简单的GUI的IDEL，还有其他文档等，这样不必把时间太多用在开发工具上了，而像学习C++等一般还要去逐步熟悉Visual C++等工具。此外，还有一点就是Python的学习很有弹性，你学一点就能做点东西，而想要深入研究仍然有无穷的方向可以选择，因为Python的应用范围就是很广阔。

=====================================================================================================================
下面就是在学习的过程中，在翻阅资料的过程中，总结的一些C和python比较明显的不同之处，有大方向的，也有细节的。肯定没有总结完，比如动态函数，lambda这些。实际上，作为两种完全不同的语言，下面这些差异只是冰山一角而已。

学习目的

我的以后的研究方向是嵌入式，显然，C语言是我的主要语言。我不是一个语言爱好者，我以前觉得，对于做研究而不是应用的人来说，了解多门语言，不如精通一门语言。之所以去看python，主要还是因为python更有利于快速开发一些程序，也是因为现在认识到，研究和应用是不能分离的。个人以为，要想在计算机工程的竞争中立足，必须懂C语言。因为真正要做高性能编程, 不可能将机器的体系架构抛到脑后让Python虚拟机（或Java虚拟机等）帮你搞定所有底层。越来越多的CPU core，越来越恐怖的内存性能瓶颈，对于上层开发人员来说，无所谓，但是对高性能程序开发人员来说，这些是无法透明的。很多应用，还是自己掌控比较有效。这些场合中，汇编和C还是不可替代的。但是，光知道C是不够的，掌握一门面向对象语言，相对更高层的语言，不仅对以后的个人发展有利，也会对自己的技术认识产生帮助。

如果要问对我来说谁更重要，我觉得还是C更重要。C的学习曲线更陡，貌似简单，实际上到处都是陷阱，看上去比较简单低效的程序，也不是学1，2个月就能搞定的。谈到优化的深层次和难度嘛，需要的功底是按年算的。但是一旦你C语言的基础打好了，对计算机的理解，对其他语言的理解都是大有裨益的。比如，如果你有C基础，可以说，学过1天python，就能写的出来一些不短的程序。后面的优化也不是什么大不了的算法，都是非常基本的语句换来换去。当然这里不是说 Python不好，实际上，上层应用，Python比C方便的不是一个层次。

很多人觉得，既然懂C了，那么进一步掌握C＋＋应该是水到渠成，但C++不是C的超集，而我又不喜欢C＋＋的繁琐和巨大，所以才决定看一看Python。我很喜欢Python的优雅与快捷。

语言类型

和C不一样，Python是一种动态类型语言，又是强类型语言。这个分类怎么理解呢？大概是可以按照下列说明来分类的：

静态类型语言

一种在编译期间就确定数据类型的语言。大多数静态类型语言是通过要求在使用任一变量之前声明其数据类型来保证这一点的。Java和 C 是静态类型语言。

动态类型语言

一种在运行期间才去确定数据类型的语言，与静态类型相反。Python 是动态类型的，因为它们确定一个变量的类型是在您第一次给它赋值的时候。

强类型语言

一种总是强制类型定义的语言。Java 和 Python 是强制类型定义的。您有一个整数，如果不明确地进行转换 ，不能将把它当成一个字符串。

弱类型语言

一种类型可以被忽略的语言，与强类型相反。VBScript 是弱类型的。在 VBScript 中，您可以将字符串 ’12′ 和整数 3 进行连接得到字符串’123′，然后可以把它看成整数 123 ，所有这些都不需要任何的显示转换。

对象机制

具体怎么来理解这个“动态确定变量类型”，就要从Python的Object对象机制说起了。Objects（以下称对象）是Python对于数据的抽象，Python中所有的数据，都是由对象或者对象之间的关系表示的，函数是对象，字符串是对象，每个东西都是对象的概念。每一个对象都有三种属性：实体，类型和值。理解实体是理解对象中很重要的一步，实体一旦被创建，那么就一直不会改变，也不会被显式摧毁，同时通常意义来讲，决定对象所支持的操作方式的类型（type，包括number，string，tuple及其他）也不会改变，改变的只可能是它的值。如果要找一个具体点的说明，实体就相当于对象在内存中的地址，是本质存在。而类型和值都只是实体的外在呈现。然后Python提供一些接口让使用者和对象交互，比如id(）函数用来获得对象实体的整形表示（实际在这里就是地址），type()函数获取其类型。

这个object机制，就是c所不具备的，主要体现在下面几点：

1 刚才说了，c是一个静态类型语言，我们可以定义int a, char b等等，但必须是在源代码里面事先规定。比如我们可以在Python里面任意一处直接规定a = “lk”，这样，a的类型就是string，这是在其赋值的时候才决定的，我们无须在代码中明确写出。而在C里面，我们必须显式规定char *a = “lk”，也就是人工事先规定好a的类型

2 由于在C中，没有对象这个概念，只有“数据的表示”，比如说，如果有两个int变量a和b，我们想比较大小，可以用a ＝＝ b来判断，但是如果是两个字符串变量a和b，我们就不得不用strcmp来比较了，因为此时，a和b本质上是指向字符串的指针，如果直接还是用＝＝比较，那比较的实际是指针中存储的值——地址。

在Java中呢，我们通过使用 str1 == str2 可以确定两个字符串变量是否指向同一块物理内存位置，这叫做“对象同一性”。在 Java 中要比较两个字符串值，你要使用 str1.equals(str2)。

然后在Python中，和前两者都不一样，由于对象的引入，我们可以用“is”这个运算符来比较两个对象的实体，和具体对象的type就没有关系了，比如你的对象是tuple也好，string也好，甚至class也好，都可以用”is”来比较，本质上就是“对象同一性”的比较，和Java中的＝＝类似，和 C中的pointer比较类似。Python中也有＝＝比较，这个就是值比较了。

3 由于对象机制的引入，让Python的使用非常灵活，比如我们可以用自省方法来查看内存中以对象形式存在的其它模块和函数，获取它们的信息，并对它们进行操作。用这种方法，你可以定义没有名称的函数，不按函数声明的参数顺序调用函数，甚至引用事先并不知道名称的函数。 这些操作在C中都是不可想象的。

4 还有一个很有意思的细节，就是类型对对象行为的影响是各方面的，比如说，a = 1; b = 1这个语句中，在Python里面引发的，可能是a，b同时指向一个值为1的对象，也可能是分别指向两个值为1的对象。而例如这个语句，c = []; d = []，那么c和d是肯定指向不同的，新创建的空list的。没完，如果是”c = d = []“这个语句呢？此时，c和d又指向了相同的list对象了。这些区别，都是在c中没有的。

最后，我们来说说为什么python慢。主要原因就是function call overhead比较大。因为所有东西现在都是对象了，contruct 和destroy 花费也大。连1 + 1 都是 function call，像’12′+’45′ 这样的要 create a third string object, then calls the string obj’s __add。可想而知，速度如何能快起来？

列表和数组

分析Python中的list和C中的数组总是很有趣的。相信可能一些朋友和一样，初学列表的时候，都是把它当作是数组来学的。最初对于list和数组区别的定性，主要是集中在两点。首先，list可以包含很多不同的数据类型，比如

["this", 1, "is", "an", "array"]

这个List，如果放在C中，其实是一个字符串数组，相当于二维的了。

其次呢，list有很多方法，其本身就是一个对象，这个和C的单纯数组是不同的。对于List的操作很多样，因为有方法也有重载的运算符。也带来一些问题，比如下面这个例子：

加入我们要产生一个多维列表，用下面这个语句

A = [[None] * 2] * 3

结果，A的值会是

[[None, None], [None, None], [None, None]]

初一看没问题，典型的二维数组形式的列表。好，现在我们想修改第一个None的值，用语句

A[0][0] = 5

现在我们再来看看A的值：

[[5, None], [5, None], [5, None]]

发现问题没有？这是因为用 * 来复制时，只是创建了对这个对象的引用，而不是真正的创建了它。 *3 创建了一个包含三个引用的列表，这三个引用都指向同一个长度为2的列表。其中一个行的改变会显示在所有行中，这当然不是你想要的。解决方法当然有，我们这样来创建

A = [None]*3
for i in range(3):
A[i] = [None] * 2

这样创建了一个包含三个不同的长度为2的列表。

所以，还是一直强调的，越复杂的东西，越灵活，也越容易出错。

代码优化

C是一个很简单的语言，当我们考虑优化的时候，通常想得也很简单，比如系统级调用越少越好（缓冲区机制），消除循环的低效率和不必要的系统引用，等等，其实主要都是基于系统和硬件细节考虑的。而Python就完全不一样了，当然上面说的这些优化形式，对于Python仍然是实用的，但由于 Python的语法形式千差万别，库和模块多种多样，所以对于语言本身而言，就有很多值得注意的优化要点，举几个例子吧。

比如我们有一个list L1，想要构建一个新的list L2，L2包括L1的头4个元素。按照最直接的想法，代码应该是

L2 = []
for i in range[3]:
L2.append(L1[i])

而更加优化和优美的版本是

L2 = L1[:3]

再比如，如果s1..s7是大字符串(10K+)，那么join([s1,s2,s3,s4,s5,s6,s7])就会比 s1+s2+s3+s4+s5+s6+s7快得多,因为后者会计算很多次子表达式，而join()则在一次过程中完成所有的复制。还有，对于字符串操作，对字符串对象使用replace()方法。仅当在没有固定字符串模式时才使用正则表达式。

所以说，以优化为评判标准，如果说C是短小精悍，Python就是博大精深。

include和import

在C语言中的include非常简单，因为形式单一，意义明确，当你需要用到外部函数等资源时，就用include。而Python中有一个相似的机制，就是import。乍一看，这两个家伙挺像的，不都是我们要用外部资源（最常见的就是函数或者模块（Python））时就用这个来指明么？其实不然，两者的处理机制本质区别在于，C中的include是用于告诉预处理器，这个include指定的文件的内容，你都给我当作在本地源文件中出现过。而 import呢，不是简单的将后面的内容*直接*插入到本地里面去，这玩意更加灵活。事实上，几乎所有类似的机制，Python都比C灵活。这里不是说C不好，C很简练，我其实更喜欢C。

简单说说这个灵活性。import在python中有三种形式，import X, from X import *( or a,b,c……), X = __import__(‘x’)。最常用的是第二种，因为比较方便，不像第一种那样老是用X.module来调用模块。from X import *只是import那些public的module(一般都是不以__命名的模块)，也可以指定a,b,c来import。

什么时候用哪一种形式呢？应该说，在大多数的模块文档里，都会明确告诉你应该用哪种形式。如果需要用到很多对象，那么from X import *可能更合适一些，但是，就目前来看，大多数第三方Python库都不推荐使用from modulename import * 这种格式。这样做会使引入者的namespace混乱。很多人甚至对于那些专门设计用于这种模式的模块（包括Tkinter, threading和matplot）都不采用这种方式。而如果你仅仅需要某个对象类a，那么用from X import a比用import X.a更好，因为以后你调用a的函数直接用a.function()既可以了，不用加X。

如果你连自己希望import的模块都不知道怎么办？请注意，此时Python的优势就体现出来了，我们可以用 __import__(module)来调用module，其中这个module是字符串，这样，可以在运行时再决定，你到底要调用什么module。举个例子：

def classFromModule (module, Name):
mod = __import__ (module)
return getattr (mod, Name)

这里，定义了一个函数classFromModule，你可以在代码的任何时候调用它，

o = classFromModule (ModuleOfTheClass, NameOfTheAttribute)()

只需要传入字符串形式的你希望import的模块ModuleOfTheClass和其中属性的名字NameOfTheAttribute（当然可以是数据也可以是方法），就能调用了，这个名字字符串不用事先指定，而是根据当时运行的情况来判断。

顺带说一句，Python中import的顺序也有默认规定，这个和C中的include有点类似，因为我们一般都是先include系统文件，再 include自己的头文件（而且还有<>和“”的区别）。Python中呢，一般应该按照以下顺序import模块：

1. 标准库模块 — 如 sys, os, getopt 等

2. 第三方模块

3. 本地实现的模块。

全局变量

这里谈全局变量呢，倒不是说Python和c的全局变量概念不同，他们的概念是相同的。只是在使用机制上，是有一些差异的。举个例子：

– module.py –
globalvar = 1

def func():
print globalvar
# This makes someglobal readonly,
# any attempt to write to someglobal
# would create a new local variable.

def func2():
global globalvar
globalvar = 2
# this allows you to manipulate the global
# variable

在 func这个函数中，globalvar是只读的。如果你使用了globalvar = xxx这种赋值语句，Python会重新创造一个新的本地对象并将新值赋给它，原来的对象值不变。而在func2函数中，由于我们事先申明了 globalvar是global的，那么此时的更改就直接在全局变量上生效。

很明显这和c中的使用机制是不一样的，在c中，我们只要在函数外的全局区域申明了变量，就可以在函数中直接对其操作，不用还申明一个global。

=====================================================================================================================
基本概念的笔记


字符串
先来说说：字符串String
字符串，字面解释就是一串字符。
严格意义上来讲，字符串是 字符的序列 。
大致分为以下三种情况：
1.使用单引号（'） 
你可以用单引号指示字符串，就如同'Quote me on this'这样。所有的空白，即空格和制表符都照原样保留。

2.使用双引号（"） 
在双引号中的字符串与单引号中的字符串的使用完全相同，例如"What's your name?"。

3.使用三引号（'''或"""） 
利用三引号，你可以指示一个多行的字符串。你可以在三引号中自由的使用单引号和双引号。例如：

'''This is a multi-line string. This is the first line.
This is the second line.
"What's your name?," I asked.
He said "Bond, James Bond."
'''
=====================================================================================================================
转义符
再谈谈转义符的概念吧。
假设你想要在一个字符串中包含一个单引号（'），那么你该怎么指示这个字符串？
例如，这个字符串是：What's your name?你肯定不会用'What's your name?'来指示它，因为Python会弄不明白这个字符串从何处开始，何处结束。所以，你需要指明单引号而不是字符串的结尾。可以通过 转义符 来完成这个任务。你用\'来指示单引号——注意这个反斜杠。现在你可以把字符串表示为'What\'s your name?'。

另一个表示这个特别的字符串的方法是"What's your name?"，即用双引号。类似地，要在双引号字符串中使用双引号本身的时候，也可以借助于转义符。另外，你可以用转义符\\来指示反斜杠本身。

值得注意的一件事是，在一个字符串中，行末的单独一个反斜杠表示字符串在下一行继续，而不是开始一个新的行。例如：

"This is the first sentence.\
This is the second sentence." 

等价于"This is the first sentence. This is the second sentence."

=====================================================================================================================
自然字符串
那么不用转义符是否可以？当然，下面来看一下：自然字符串
如果想要指示某些不需要如转义符那样的特别处理的字符串，那么需要指定一个自然字符串。自然字符串通过给字符串加上前缀r或R来指定。例如r"Newlines are indicated by \n"。

Unicode字符串 
Unicode是书写国际文本的标准方法。如果想要用你的母语如北印度语或阿拉伯语写文本，那么需要有一个支持Unicode的编辑器，比如EditPlus就是我的菜。
类似地，Python允许你处理Unicode文本——只需要在字符串前加上前缀u或U。
例如，u"This is a Unicode string."
在处理文本文件的时候使用Unicode字符串，特别是当知道这个文件含有用非英语的语言写的文本。

在Python中注意以下几点特别的地方：
1.字符串是不可变的 
这意味着一旦创造了一个字符串，就不能再改变它了。虽然这看起来像是一件坏事，但实际上它不是。

2.按字面意义级连字符串 
如果把两个字符串按字面意义相邻放着，他们会被Python自动级连。例如，'What\'s' 'your name?'会被自动转为"What's your name?"。

3.给JAVA/C++程序员的注释
在Python中没有专门的char数据类型。 

4.给Perl/PHP程序员的注释
单引号和双引号字符串是完全相同的——它们没有在任何方面有不同。 

5.给正则表达式用户的注释
一定要用自然字符串处理正则表达式。否则会需要使用很多的反斜杠。例如，后向引用符可以写成'\\1'或r'\1'。

下面再来看下标识符命名的问题。
标识符 是用来标识 某样东西 的名字。在命名标识符的时候，你要遵循这些规则：
标识符的第一个字符必须是字母表中的字母（大写或小写）或者一个下划线（‘ _ ’）。
标识符名称的其他部分可以由字母（大写或小写）、下划线（‘ _ ’）或数字（0-9）组成。
标识符名称是对大小写敏感的。例如，myname和myName不是一个标识符。注意前者中的小写n和后者中的大写N。
有效 标识符名称的例子有i、__my_name、name_23和a1b2_c3。
无效 标识符名称的例子有2things、this is spaced out和my-name。


=====================================================================================================================
对象
Python把在程序中用到的任何东西都称为 对象 。

给面向对象编程用户的注释
就每一个东西包括数、字符串甚至函数都是对象这一点来说，Python是极其完全地面向对象的。 

为了进一步解释对象的概念，先来看下如何编写Python程序
下面是保存和运行Python程序的标准流程。
   1. 打开你最喜欢的编辑器。
   2. 输入例子中的程序代码。
   3. 用注释中给出的文件名把它保存为一个文件。我按照惯例把所有的Python程序都以扩展名.py保存。
   4. 运行解释器命令python program.py或者使用IDLE运行程序。你也可以使用先前介绍的可执行的方法。

我们将看一下如何使用变量和字面意义上的常量。保存下面这个例子，然后运行程序。
例4.1 使用变量和字面意义上的常量（源文件：02.var_test.py）
[python] view plaincopy
# Filename : var.py  
i = 5  
print(i)  
i = i + 1  
print(i)  
  
s = '''''This is a multi-line string. 
This is the second line.'''  
print(s)   

输出
5
6
This is a multi-line string.
This is the second line. 

和C++或java不同，使用变量时只需要给它们赋一个值。不需要声明或定义数据类型。这点有点像PHP和JS，但是也没有var的概念。


=====================================================================================================================
再说一个和JAVA与C++大不相同的地方：缩进。
空白在Python中是重要的。事实上行首的空白是重要的。它称为缩进。在逻辑行首的空白（空格和制表符）用来决定逻辑行的缩进层次，从而用来决定语句的分组。

这意味着同一层次的语句必须有相同的缩进。每一组这样的语句称为一个块。我们将在后面的章节中看到有关块的用处的例子。

你需要记住的一样东西是错误的缩进会引发错误。例如：
[python] view plaincopy
i = 5  
 print('Value is', i # Error! Notice a single space at the start of the line)  
print( 'I repeat, the value is', i )  

当你运行这个程序的时候，你会得到下面的错误：

  File "whitespace.py", line 4
    print 'Value is', i # Error! Notice a single space at the start of the line
    ^
SyntaxError: invalid syntax 

注意，在第二行的行首有一个空格。Python指示的这个错误告诉我们程序的语法是无效的，即程序没有正确地编写。它告诉你， 你不能随意地开始新的语句块 （当然除了你一直在使用的主块）。何时你能够使用新块，将会在后面的章节，如控制流中详细介绍。

如何缩进
不要混合使用制表符和空格来缩进，因为这在跨越不同的平台的时候，无法正常工作。我 强烈建议 你在每个缩进层次使用 单个制表符 或 两个或四个空格 。
选择这三种缩进风格之一。更加重要的是，选择一种风格，然后一贯地使用它，即只使用这一种风格。 

=====================================================================================================================

